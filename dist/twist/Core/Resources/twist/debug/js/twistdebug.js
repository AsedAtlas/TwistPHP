!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),n=function(){function n(){var e=this;t(this,n);try{var o=["%c %c %c TwistPHP Debug %c %c ","font-size: 15px; background: #2a5200;","font-size: 17px; background: #3f7a00;","color: #FFF; font-size: 18px; background: #539F00;","font-size: 17px; background: #3f7a00;","font-size: 15px; background: #2a5200;"];console.log.apply(console,o)}catch(t){console.info?console.info("TwistPHP Debug"):console.log("TwistPHP Debug")}window.onerror=function(t,o,n,r,i){return console.log("HAHAHAHA"),e.error(t,"OH NOES!",o,n,r,i),!1},this.setupUI(),this.outputExistingAJAX()}return o(n,[{key:"objectLength",value:function(t){var e=0;for(var o in t)t.hasOwnProperty(o)&&e++;return e}},{key:"outputExistingAJAX",value:function(){if(twist.ajax){var t=!0,e=!1,o=void 0;try{for(var n,r=twist.ajax.instances[Symbol.iterator]();!(t=(n=r.next()).done);t=!0){var i=n.value,a=!0,s=!1,l=void 0;try{for(var u,d=i.requests[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var c=u.value;this.logAJAX(c)}}catch(t){s=!0,l=t}finally{try{!a&&d.return&&d.return()}finally{if(s)throw l}}}}catch(t){e=!0,o=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw o}}}}},{key:"logToTwist",value:function(t,o,n,r,i,a,s){if(n){var l=n||"",u="",d="";if("object"===(void 0===n?"undefined":e(n))&&(l="<pre>"+JSON.stringify(n,void 0,2)+"</pre>"),"object"===(void 0===r?"undefined":e(r))){for(var c in r)d+="<dt>"+(c.charAt(0).toUpperCase()+c.slice(1).replace("_"," "))+"</dt><dd>"+("object"===e(r[c])?"<pre>"+JSON.stringify(r[c],void 0,2)+"</pre>":r[c])+"</dd>";d='<dl class="details">'+d+"</dl>"}else d='<p class="details">'+r+"</p>";void 0!==i?""!==i&&(u=void 0!==a&&""!==a?void 0!==s&&""!==s?i+", line "+a+", column "+s:i+", line "+a:i):u="JavaScript ["+(new Date).getTime()+"]";var f=document.createElement("div");return f.classList.add("twist-debug-box-"+o),f.setAttribute("data-title",u),f.innerHTML=""!==d?l+'<div class="twist-debug-more-details">'+d+'</div><a href="#twist-debug-more-details" class="twist-debug-more-details">&ctdot;</a>':l,document.querySelector(t).appendChild(f),f}return!1}},{key:"error",value:function(t,o,n,r){var i={type:void 0===t?"undefined":e(t),length:"object"===(void 0===t?"undefined":e(t))?this.objectLength(t):t.length};if(this.logToTwist("#twist-debug-messages-list","red","<p>"+t+"</p>",i,o,n,r)){var a=document.getElementById("twist-debug-errors");a.setAttribute("data-count",parseInt(a.getAttribute("data-count"))+1)}}},{key:"warn",value:function(t,o,n,r){var i={type:void 0===t?"undefined":e(t),length:"object"===(void 0===t?"undefined":e(t))?this.objectLength(t):t.length};if(this.logToTwist("#twist-debug-messages-list","yellow","<p>"+t+"</p>",i,o,n,r)){var a=document.getElementById("twist-debug-warnings");a.setAttribute("data-count",parseInt(a.getAttribute("data-count"))+1)}}},{key:"log",value:function(t,o,n,r){var i={type:void 0===t?"undefined":e(t),length:"object"===(void 0===t?"undefined":e(t))?this.objectLength(t):t.length};if(this.logToTwist("#twist-debug-messages-list","blue","<p>"+t+"</p>",i,o,n,r)){var a=document.getElementById("twist-debug-dumps");a.setAttribute("data-count",parseInt(a.getAttribute("data-count"))+1)}}},{key:"logAJAX",value:function(t){var e={uri:t.url,options:t.options};e.options.body&&(e.options.body=JSON.parse(e.options.body));var o=this.logToTwist("#twist-debug-ajax-list","",e,"Waiting...",t.options.method+" "+t.url);if(o){var n=document.getElementById("twist-debug-ajax-count");n.setAttribute("data-count",parseInt(n.getAttribute("data-count"))+1),t.$debug=o}}},{key:"logFileUpload",value:function(t,e){var o=e.support&&e.support["thumb-128"]?e.support["thumb-128"]:e.uri_preview,n="<pre>"+JSON.stringify(e,void 0,2)+'</pre><div class="twist-debug-fileupload-preview"><img src="'+o+'"></div>';if(this.logToTwist("#twist-debug-fileupload-list","green",n,t,t.name)){var r=document.getElementById("twist-debug-fileupload-count");r.setAttribute("data-count",parseInt(r.getAttribute("data-count"))+1)}}},{key:"setupUI",value:function(){var t=document.getElementById("twist-debug-blocks"),e=document.getElementById("twist-debug-details"),o=!0,n=!1,r=void 0;try{for(var i,a=document.getElementById("twist-debug-details").querySelectorAll('.twist-debug-box, [class^="twist-debug-box-"], [class*=" twist-debug-box-"]')[Symbol.iterator]();!(o=(i=a.next()).done);o=!0){var s=i.value;if(s.querySelector(".twist-debug-more-details")){var l=s.querySelector(".twist-debug-more-details"),u=document.createElement("a");u.setAttribute("href","#twist-debug-more-details"),u.classList.add("twist-debug-more-details"),u.innerHTML="&ctdot;",l.parentNode.appendChild(u)}}}catch(t){n=!0,r=t}finally{try{!o&&a.return&&a.return()}finally{if(n)throw r}}var d=!0,c=!1,f=void 0;try{for(var y,v=t.querySelectorAll("button")[Symbol.iterator]();!(d=(y=v.next()).done);d=!0)y.value.addEventListener("click",function(o){o.preventDefault();var n=this;if(n.classList.contains("current"))e.classList.remove("show"),n.removeClass("current");else{var r=n.getAttribute("data-panel");e.classList.add("show");var i=!0,a=!1,s=void 0;try{for(var l,u=e.children[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var d=l.value;"div"===d.tagName.toLowerCase()&&(d.style.display="none")}}catch(t){a=!0,s=t}finally{try{!i&&u.return&&u.return()}finally{if(a)throw s}}document.querySelector(r).style.display="block";var c=!0,f=!1,y=void 0;try{for(var v,g=t.querySelectorAll("button.current")[Symbol.iterator]();!(c=(v=g.next()).done);c=!0)v.value.classList.remove("current")}catch(t){f=!0,y=t}finally{try{!c&&g.return&&g.return()}finally{if(f)throw y}}n.classList.add("current")}})}catch(t){c=!0,f=t}finally{try{!d&&v.return&&v.return()}finally{if(c)throw f}}document.getElementById("close-twist-debug-details").addEventListener("click",function(o){o.preventDefault(),t.querySelector("button.current").classList.remove("current"),e.classList.remove("show")});var g=!0,b=!1,p=void 0;try{for(var m,w=e.querySelectorAll('a[href="#twist-debug-more-details"]')[Symbol.iterator]();!(g=(m=w.next()).done);g=!0)m.value.addEventListener("click",function(t){})}catch(t){b=!0,p=t}finally{try{!g&&w.return&&w.return()}finally{if(b)throw p}}document.getElementById("twist-debug").classList.add("ready")}}],[{key:"getScript",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},n=document.createElement("script"),r=document.getElementsByTagName("head")[0],i=!1;o="function"==typeof e?e:"function"==typeof o?o:function(){},n.src=t,n.crossorigin="anonymous",n.onload=n.onreadystatechange=function(){if(!(i||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)){i=!0;try{o()}catch(t){console.error(t)}n.onload=n.onreadystatechange=null,r.removeChild(n)}},r.appendChild(n)}}]),n}();window.twist?window.twist.debug=new n:window.twist={debug:new n}});
//# sourceMappingURL=twistdebug.js.map
