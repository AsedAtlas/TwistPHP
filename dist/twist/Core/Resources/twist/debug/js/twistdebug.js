!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var n=function(){function n(){var t=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);try{console.log.apply(console,["%c %c %c TwistPHP Debug %c %c ","font-size: 15px; background: #2a5200;","font-size: 17px; background: #3f7a00;","color: #FFF; font-size: 18px; background: #539F00;","font-size: 17px; background: #3f7a00;","font-size: 15px; background: #2a5200;"])}catch(t){console.info?console.info("TwistPHP Debug"):console.log("TwistPHP Debug")}if(window.twist&&window.twist.catches){var e=!0,i=!1,o=void 0;try{for(var r,a=window.twist.catches[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var l=r.value;switch(console.log(l),l.type){case"error":this.error.apply(this,l.details);break;case"warning":this.warn.apply(this,l.details)}}}catch(t){i=!0,o=t}finally{try{!e&&a.return&&a.return()}finally{if(i)throw o}}}window.onerror=function(e,n,i,o){t.error(e,n,i,o)},window.onwarn=function(e,n,i,o){t.warn(e,n,i,o)},this.setupUI(),this.outputExistingAJAX()}return e(n,[{key:"outputExistingAJAX",value:function(){if(window.twist&&window.twist.ajax){var t=!0,e=!1,n=void 0;try{for(var i,o=window.twist.ajax.instances[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var r=i.value,a=!0,l=!1,s=void 0;try{for(var d,u=r.requests[Symbol.iterator]();!(a=(d=u.next()).done);a=!0){var c=d.value;this.logAJAX(c)}}catch(t){l=!0,s=t}finally{try{!a&&u.return&&u.return()}finally{if(l)throw s}}}}catch(t){e=!0,n=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw n}}}}},{key:"logToTwist",value:function(e,i,o){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;if(o){var d=o||"",u="",c=null;if("object"===(void 0===o?"undefined":t(o))&&(d="<pre>"+JSON.stringify(o,void 0,2)+"</pre>"),"string"==typeof r)c='<p class="details">'+r+"</p>";else if(n.objectLength(r)){var f=!0,y=!1,v=void 0;try{for(var g,b=r[Symbol.iterator]();!(f=(g=b.next()).done);f=!0){var p=g.value;c+="<dt>"+(strDetail.charAt(0).toUpperCase()+strDetail.slice(1).replace("_"," "))+"</dt><dd>"+("object"===(void 0===p?"undefined":t(p))?"<pre>"+JSON.stringify(p,void 0,2)+"</pre>":p)+"</dd>"}}catch(t){y=!0,v=t}finally{try{!f&&b.return&&b.return()}finally{if(y)throw v}}c='<dl class="details">'+c+"</dl>"}u=a?l?s?a+", line "+l+", column "+s:a+", line "+l:a:"JavaScript ["+(new Date).getTime()+"]";var w=document.createElement("div");if(w.innerHTML=d,w.classList.add("twist-debug-box-"+i),w.setAttribute("data-title",u),c){var h=document.createElement("div");h.classList.add("twist-debug-more-details"),h.innerHTML=c,w.appendChild(h);var m=document.createElement("a");m.classList.add("twist-debug-more-details-button"),m.innerHTML="&ctdot;",m.setAttribute("href","#twist-debug-more-details"),m.addEventListener("click",function(t){t.preventDefault(),h.offsetWidth>0&&h.offsetHeight>0?h.style.display="none":h.style.display="block"}),w.appendChild(m)}return document.querySelector(e).appendChild(w),w}return!1}},{key:"error",value:function(e,n,i,o){var r={type:void 0===e?"undefined":t(e),length:"object"===(void 0===e?"undefined":t(e))?this.objectLength(e):e.length};if(this.logToTwist("#twist-debug-messages-list","red","<p>"+e+"</p>",r,n,i,o)){var a=document.getElementById("twist-debug-errors");a.setAttribute("data-count",(parseInt(a.getAttribute("data-count"))+1).toString())}}},{key:"warn",value:function(e,n,i,o){var r={type:void 0===e?"undefined":t(e),length:"object"===(void 0===e?"undefined":t(e))?this.objectLength(e):e.length};if(this.logToTwist("#twist-debug-messages-list","yellow","<p>"+e+"</p>",r,n,i,o)){var a=document.getElementById("twist-debug-warnings");a.setAttribute("data-count",(parseInt(a.getAttribute("data-count"))+1).toString())}}},{key:"log",value:function(e,n,i,o){var r={type:void 0===e?"undefined":t(e),length:"object"===(void 0===e?"undefined":t(e))?this.objectLength(e):e.length};if(this.logToTwist("#twist-debug-messages-list","blue","<p>"+e+"</p>",r,n,i,o)){var a=document.getElementById("twist-debug-dumps");a.setAttribute("data-count",(parseInt(a.getAttribute("data-count"))+1).toString())}}},{key:"logAJAX",value:function(t){var e={uri:t.url,options:t.options};e.options.body&&(e.options.body=JSON.parse(e.options.body));var n=this.logToTwist("#twist-debug-ajax-list","",e,"Waiting...",t.options.method+" "+t.url);if(n){var i=document.getElementById("twist-debug-ajax-count");i.setAttribute("data-count",(parseInt(i.getAttribute("data-count"))+1).toString()),t.$debug=n}}},{key:"logFileUpload",value:function(t,e){var n=e.support&&e.support["thumb-128"]?e.support["thumb-128"]:e.uri_preview,i="<pre>"+JSON.stringify(e,void 0,2)+'</pre><div class="twist-debug-fileupload-preview"><img src="'+n+'"></div>';if(this.logToTwist("#twist-debug-fileupload-list","green",i,null,t.name)){var o=document.getElementById("twist-debug-fileupload-count");o.setAttribute("data-count",(parseInt(o.getAttribute("data-count"))+1).toString())}}},{key:"setupUI",value:function(){var t=document.getElementById("twist-debug-blocks"),e=document.getElementById("twist-debug-details"),i=!0,o=!1,r=void 0;try{for(var a,l=document.getElementById("twist-debug-details").querySelectorAll('.twist-debug-box, [class^="twist-debug-box-"], [class*=" twist-debug-box-"]')[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var s=a.value;s.querySelector(".twist-debug-more-details")&&!s.querySelector(".twist-debug-more-details-button")&&function(){var t=s.querySelector(".twist-debug-more-details"),e=document.createElement("a");e.classList.add("twist-debug-more-details-button"),e.innerHTML="&ctdot;",e.setAttribute("href","#twist-debug-more-details"),e.addEventListener("click",function(e){e.preventDefault(),t.offsetWidth>0&&t.offsetHeight>0?t.style.display="none":t.style.display="block"}),s.appendChild(e)}()}}catch(t){o=!0,r=t}finally{try{!i&&l.return&&l.return()}finally{if(o)throw r}}var d=!0,u=!1,c=void 0;try{for(var f,y=t.querySelectorAll("button")[Symbol.iterator]();!(d=(f=y.next()).done);d=!0){f.value.addEventListener("click",function(n){n.preventDefault();if(this.classList.contains("current"))e.classList.remove("show"),this.classList.remove("current");else{var i=this.getAttribute("data-panel");e.classList.add("show");var o=!0,r=!1,a=void 0;try{for(var l,s=e.children[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var d=l.value;"div"===d.tagName.toLowerCase()&&(d.style.display="none")}}catch(t){r=!0,a=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw a}}document.querySelector(i).style.display="block";var u=!0,c=!1,f=void 0;try{for(var y,v=t.querySelectorAll("button.current")[Symbol.iterator]();!(u=(y=v.next()).done);u=!0){y.value.classList.remove("current")}}catch(t){c=!0,f=t}finally{try{!u&&v.return&&v.return()}finally{if(c)throw f}}this.classList.add("current")}})}}catch(t){u=!0,c=t}finally{try{!d&&y.return&&y.return()}finally{if(u)throw c}}document.getElementById("close-twist-debug-details").addEventListener("click",function(n){n.preventDefault(),t.querySelector("button.current").classList.remove("current"),e.classList.remove("show")}),n.wrap("#twist-debug-details table","div","table-wrapper"),document.getElementById("twist-debug").classList.add("ready")}}],[{key:"objectLength",value:function(t){return t?Object.keys(t).length:0}},{key:"wrap",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";document.querySelectorAll(t).forEach(function(t){var i=document.createElement(e);n&&(i.className=n),t.parentElement.insertBefore(i,t),i.appendChild(t)})}}]),n}();window.twist?window.twist.debug=new n:window.twist={debug:new n}});
//# sourceMappingURL=twistdebug.js.map
