!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.twistajax=t()}(this,function(){"use strict";function e(e){var t=[],n=/^([^\[\]]*)/,i=new RegExp(c),o=n.exec(e);for(o[1]&&t.push(o[1]);null!==(o=i.exec(e));)t.push(o[1]);return t}function t(e,n,i){if(0===n.length)return e=i;var o=n.shift(),r=o.match(/^\[(.+?)\]$/);if("[]"===o)return e=e||[],Array.isArray(e)?e.push(t(null,n,i)):(e._values=e._values||[],e._values.push(t(null,n,i))),e;if(r){var u=r[1],a=+u;isNaN(a)?(e=e||{})[u]=t(e[u],n,i):(e=e||[])[a]=t(e[a],n,i)}else e[o]=t(e[o],n,i);return e}function n(n,i,o){if(i.match(c))t(n,e(i),o);else{var r=n[i];r?(Array.isArray(r)||(n[i]=[r]),n[i].push(o)):n[i]=o}return n}function i(e,t,n){return n=n.replace(/(\r)?\n/g,"\r\n"),n=encodeURIComponent(n),n=n.replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(t)+"="+n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=/^(?:submit|button|image|reset|file)$/i,a=/^(?:input|select|textarea|keygen)/i,c=/(\[[^\[\]]*\])/g,l=function(e,t){"object"!=(void 0===t?"undefined":r(t))?t={hash:!!t}:void 0===t.hash&&(t.hash=!0);for(var o=t.hash?{}:"",c=t.serializer||(t.hash?n:i),l=e&&e.elements?e.elements:[],s=Object.create(null),f=0;f<l.length;++f){var h=l[f];if((t.disabled||!h.disabled)&&h.name&&a.test(h.nodeName)&&!u.test(h.type)){var d=h.name,p=h.value;if("checkbox"!==h.type&&"radio"!==h.type||h.checked||(p=void 0),t.empty){if("checkbox"!==h.type||h.checked||(p=""),"radio"===h.type&&(s[h.name]||h.checked?h.checked&&(s[h.name]=!0):s[h.name]=!1),void 0==p&&"radio"==h.type)continue}else if(!p)continue;if("select-multiple"!==h.type)o=c(o,d,p);else{p=[];for(var y=h.options,v=!1,m=0;m<y.length;++m){var b=y[m],g=t.empty&&!b.value,k=b.value||g;b.selected&&k&&(v=!0,o=t.hash&&"[]"!==d.slice(d.length-2)?c(o,d+"[]",b.value):c(o,d,b.value))}!v&&t.empty&&(o=c(o,d,""))}}}if(t.empty)for(var d in s)s[d]||(o=c(o,d,""));return o}.serialize,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();return function(){function e(t){o(this,e),this.URI=t,this.globalSuccessFunction=function(){},this.globalFailureFunction=function(){},this.timeout=1e4,this.cache=!1,this.requests=0,this.debug=!1,this.loader=null}return s(e,[{key:"get",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.send("GET",e)}},{key:"post",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.send("POST",e)}},{key:"send",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"GET";return new Promise(function(e,r){fetch(n.URI,{method:o,headers:myHeaders,cache:n.cache?"default":"no-store"}).then(function(e){return e.json()}).then(function(e){return e}).then(function(e){t.apply(e)}).then(function(t){return e(t)}).catch(function(e){i.apply(),r(e)})})}},{key:"serialise",value:function(e){return l(e)}}]),e}()});
//# sourceMappingURL=twistajax.js.map
