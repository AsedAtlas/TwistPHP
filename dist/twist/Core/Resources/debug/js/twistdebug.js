!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var n=function(){function n(){var t=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);try{console.log.apply(console,["%c %c %c TwistPHP %c %c ","font-size: 15px; background: #2A5200;","font-size: 17px; background: #3F7A00;","color: #FFF; font-size: 18px; background: #539F00;","font-size: 17px; background: #3F7A00;","font-size: 15px; background: #2A5200;"])}catch(t){console.info?console.info("TwistPHP"):console.log("TwistPHP")}if(window.twist&&window.twist.catches)for(var e in window.twist.catches)if(window.twist.catches.hasOwnProperty(e)){var i=window.twist.catches[e];switch(i.type){case"error":this.error.apply(this,i.details);break;case"warning":this.warn.apply(this,i.details)}}window.onerror=function(e,n,i,o){t.error(e,n,i,o)},window.onwarn=function(e,n,i,o){t.warn(e,n,i,o)},this.setupUI(),this.outputExistingAJAX(),window.console.error=function(e){t.error(e)},window.console.warn=function(e){t.warn(e)},window.console.info=function(e){t.info(e)},window.console.log=function(e){t.log(e)}}return e(n,[{key:"outputExistingAJAX",value:function(){if(window.twist&&window.twist.ajax)for(var t in window.twist.ajax.instances)if(window.twist.ajax.instances.hasOwnProperty(t))for(var e in window.twist.ajax.instances[t].requests)window.twist.ajax.instances[t].requests.hasOwnProperty(e)&&this.logAJAX(window.twist.ajax.instances[t].requests[e])}},{key:"stringifyJSON",value:function(e){var n=[];return JSON.stringify(e,function(e,i){if(null!==i&&"object"===(void 0===i?"undefined":t(i))){if(n.indexOf(i)>=0)return;n.push(i)}return i},2)}},{key:"logToTwist",value:function(e,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;if(i){var d=i||"",l="",u="";if("object"===(void 0===i?"undefined":t(i))&&(d="<pre>"+this.stringifyJSON(i)+"</pre>"),"string"==typeof o)u='<pre class="details">'+o+"</pre>";else if(o&&Object.keys(o).length){for(var c in o)if(o.hasOwnProperty(c)){var w=o[c];u+="<dt>"+(c.charAt(0).toUpperCase()+c.slice(1).replace("_"," "))+"</dt><dd>"+("object"===(void 0===w?"undefined":t(w))?"<pre>"+this.stringifyJSON(w)+"</pre>":w)+"</dd>"}u='<dl class="details">'+u+"</dl>"}l=r?s?a?r+", line "+s+", column "+a:r+", line "+s:r:"JavaScript ["+(new Date).getTime()+"]";var f=document.createElement("div");if(f.innerHTML=d,f.classList.add("twist-debug-box-"+n),f.setAttribute("data-title",l),u){var g=document.createElement("div");g.classList.add("twist-debug-more-details"),g.innerHTML=u,f.appendChild(g);var b=document.createElement("a");b.classList.add("twist-debug-more-details-button"),b.innerHTML="&ctdot;",b.setAttribute("href","#twist-debug-more-details"),b.addEventListener("click",function(t){t.preventDefault(),g.offsetWidth>0&&g.offsetHeight>0?g.style.display="none":g.style.display="block"}),f.appendChild(b)}return document.querySelector(e).appendChild(f),f}return!1}},{key:"recordLog",value:function(e,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a={type:void 0===i?"undefined":t(i),length:i?"object"===(void 0===i?"undefined":t(i))?Object.keys(i).length:i.length:0},d="object"===(void 0===i?"undefined":t(i))?i:"<p>"+i+"</p>";if(this.logToTwist("#twist-debug-messages-list",n,d,a,o,r,s)){var l=document.getElementById(e);l.setAttribute("data-count",(parseInt(l.getAttribute("data-count"))+1).toString())}}},{key:"error",value:function(t,e,n,i){this.recordLog("twist-debug-errors","red",t,e,n,i)}},{key:"warn",value:function(t,e,n,i){this.recordLog("twist-debug-warnings","yellow",t,e,n,i)}},{key:"info",value:function(t,e,n,i){this.recordLog("twist-debug-info","blue",t,e,n,i)}},{key:"log",value:function(t,e,n,i){this.recordLog("twist-debug-logs","grey",t,e,n,i)}},{key:"logAJAX",value:function(t){var e={uri:t.url,options:t.options};e.options.body&&(e.options.body=JSON.parse(e.options.body));var n=this.logToTwist("#twist-debug-ajax-list","",e,"Waiting...",t.options.method+" "+t.url);if(n){var i=document.getElementById("twist-debug-ajax-count");i.setAttribute("data-count",(parseInt(i.getAttribute("data-count"))+1).toString()),t.$debug=n}}},{key:"logFileUpload",value:function(t,e){var n=e.support&&e.support["thumb-128"]?e.support["thumb-128"]:e.uri_preview,i="<pre>"+this.stringifyJSON(e)+'</pre><div class="twist-debug-fileupload-preview"><img src="'+n+'"></div>';if(this.logToTwist("#twist-debug-fileupload-list","green",i,null,t.name)){var o=document.getElementById("twist-debug-fileupload-count");o.setAttribute("data-count",(parseInt(o.getAttribute("data-count"))+1).toString())}}},{key:"setupUI",value:function(){var t=document.getElementById("twist-debug-blocks"),e=document.getElementById("twist-debug-details");for(var i in document.getElementById("twist-debug-details").querySelectorAll('.twist-debug-box, [class^="twist-debug-box-"], [class*=" twist-debug-box-"]'))if(document.getElementById("twist-debug-details").querySelectorAll('.twist-debug-box, [class^="twist-debug-box-"], [class*=" twist-debug-box-"]').hasOwnProperty(i)){var o=document.getElementById("twist-debug-details").querySelectorAll('.twist-debug-box, [class^="twist-debug-box-"], [class*=" twist-debug-box-"]')[i];o.querySelector(".twist-debug-more-details")&&!o.querySelector(".twist-debug-more-details-button")&&function(){var t=o.querySelector(".twist-debug-more-details"),e=document.createElement("a");e.classList.add("twist-debug-more-details-button"),e.innerHTML="&ctdot;",e.setAttribute("href","#twist-debug-more-details"),e.addEventListener("click",function(e){e.preventDefault(),t.offsetWidth>0&&t.offsetHeight>0?t.style.display="none":t.style.display="block"}),o.appendChild(e)}()}for(var r in t.querySelectorAll("button")){if(t.querySelectorAll("button").hasOwnProperty(r))t.querySelectorAll("button")[r].addEventListener("click",function(n){n.preventDefault();if(this.classList.contains("current"))e.classList.remove("show"),this.classList.remove("current");else{var i=this.getAttribute("data-panel");for(var o in e.classList.add("show"),e.children)if(e.children.hasOwnProperty(o)){var r=e.children[o];"div"===r.tagName.toLowerCase()&&(r.style.display="none")}for(var s in e.querySelector(i).style.display="block",t.querySelectorAll("button.current"))t.querySelectorAll("button.current").hasOwnProperty(s)&&t.querySelectorAll("button.current")[s].classList.remove("current");this.classList.add("current")}})}document.getElementById("close-twist-debug-details").addEventListener("click",function(n){n.preventDefault(),t.querySelector("button.current").classList.remove("current"),e.classList.remove("show")}),n.wrap("#twist-debug-details table","div","table-wrapper"),document.getElementById("twist-debug").classList.add("ready")}}],[{key:"wrap",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=document.querySelectorAll(t);for(var o in i)if(i.hasOwnProperty(o)){var r=i[o],s=document.createElement(e);n&&(s.className=n),r.parentElement.insertBefore(s,r),s.appendChild(r)}}}]),n}();window.twist?window.twist.debug=new n:window.twist={debug:new n};var i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href","https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"),document.getElementsByTagName("head")[0].appendChild(i)});
//# sourceMappingURL=twistdebug.js.map
