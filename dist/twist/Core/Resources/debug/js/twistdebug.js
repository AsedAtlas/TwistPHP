!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var n=function(){function n(){var t=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);try{console.log.apply(console,["%c %c %c TwistPHP %c %c ","font-size: 15px; background: #2A5200;","font-size: 17px; background: #3F7A00;","color: #FFF; font-size: 18px; background: #539F00;","font-size: 17px; background: #3F7A00;","font-size: 15px; background: #2A5200;"])}catch(t){console.info?console.info("TwistPHP"):console.log("TwistPHP")}if(window.twist&&window.twist.catches){var e=!0,i=!1,o=void 0;try{for(var r,a=window.twist.catches[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var s=r.value;switch(s.type){case"error":this.error.apply(this,s.details);break;case"warning":this.warn.apply(this,s.details)}}}catch(t){i=!0,o=t}finally{try{!e&&a.return&&a.return()}finally{if(i)throw o}}}window.onerror=function(e,n,i,o){t.error(e,n,i,o)},window.onwarn=function(e,n,i,o){t.warn(e,n,i,o)},this.setupUI(),this.outputExistingAJAX(),window.console.error=function(e){t.error(e)},window.console.warn=function(e){t.warn(e)},window.console.info=function(e){t.info(e)},window.console.log=function(e){t.log(e)}}return e(n,[{key:"outputExistingAJAX",value:function(){if(window.twist&&window.twist.ajax){var t=!0,e=!1,n=void 0;try{for(var i,o=window.twist.ajax.instances[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var r=i.value,a=!0,s=!1,l=void 0;try{for(var d,u=r.requests[Symbol.iterator]();!(a=(d=u.next()).done);a=!0){var c=d.value;this.logAJAX(c)}}catch(t){s=!0,l=t}finally{try{!a&&u.return&&u.return()}finally{if(s)throw l}}}}catch(t){e=!0,n=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw n}}}}},{key:"stringifyJSON",value:function(e){var n=[];return JSON.stringify(e,function(e,i){if(null!==i&&"object"===(void 0===i?"undefined":t(i))){if(n.indexOf(i)>=0)return;n.push(i)}return i},2)}},{key:"logToTwist",value:function(e,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;if(i){var l=i||"",d="",u="";if("object"===(void 0===i?"undefined":t(i))&&(l="<pre>"+this.stringifyJSON(i)+"</pre>"),"string"==typeof o)u='<pre class="details">'+o+"</pre>";else if(o&&Object.keys(o).length){for(var c in o)if(o.hasOwnProperty(c)){var f=o[c];u+="<dt>"+(c.charAt(0).toUpperCase()+c.slice(1).replace("_"," "))+"</dt><dd>"+("object"===(void 0===f?"undefined":t(f))?"<pre>"+this.stringifyJSON(f)+"</pre>":f)+"</dd>"}u='<dl class="details">'+u+"</dl>"}d=r?a?s?r+", line "+a+", column "+s:r+", line "+a:r:"JavaScript ["+(new Date).getTime()+"]";var y=document.createElement("div");if(y.innerHTML=l,y.classList.add("twist-debug-box-"+n),y.setAttribute("data-title",d),u){var v=document.createElement("div");v.classList.add("twist-debug-more-details"),v.innerHTML=u,y.appendChild(v);var w=document.createElement("a");w.classList.add("twist-debug-more-details-button"),w.innerHTML="&ctdot;",w.setAttribute("href","#twist-debug-more-details"),w.addEventListener("click",function(t){t.preventDefault(),v.offsetWidth>0&&v.offsetHeight>0?v.style.display="none":v.style.display="block"}),y.appendChild(w)}return document.querySelector(e).appendChild(y),y}return!1}},{key:"recordLog",value:function(e,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s={type:void 0===i?"undefined":t(i),length:i?"object"===(void 0===i?"undefined":t(i))?Object.keys(i).length:i.length:0},l="object"===(void 0===i?"undefined":t(i))?i:"<p>"+i+"</p>";if(this.logToTwist("#twist-debug-messages-list",n,l,s,o,r,a)){var d=document.getElementById(e);d.setAttribute("data-count",(parseInt(d.getAttribute("data-count"))+1).toString())}}},{key:"error",value:function(t,e,n,i){this.recordLog("twist-debug-errors","red",t,e,n,i)}},{key:"warn",value:function(t,e,n,i){this.recordLog("twist-debug-warnings","yellow",t,e,n,i)}},{key:"info",value:function(t,e,n,i){this.recordLog("twist-debug-info","blue",t,e,n,i)}},{key:"log",value:function(t,e,n,i){this.recordLog("twist-debug-logs","grey",t,e,n,i)}},{key:"logAJAX",value:function(t){var e={uri:t.url,options:t.options};e.options.body&&(e.options.body=JSON.parse(e.options.body));var n=this.logToTwist("#twist-debug-ajax-list","",e,"Waiting...",t.options.method+" "+t.url);if(n){var i=document.getElementById("twist-debug-ajax-count");i.setAttribute("data-count",(parseInt(i.getAttribute("data-count"))+1).toString()),t.$debug=n}}},{key:"logFileUpload",value:function(t,e){var n=e.support&&e.support["thumb-128"]?e.support["thumb-128"]:e.uri_preview,i="<pre>"+this.stringifyJSON(e)+'</pre><div class="twist-debug-fileupload-preview"><img src="'+n+'"></div>';if(this.logToTwist("#twist-debug-fileupload-list","green",i,null,t.name)){var o=document.getElementById("twist-debug-fileupload-count");o.setAttribute("data-count",(parseInt(o.getAttribute("data-count"))+1).toString())}}},{key:"setupUI",value:function(){var t=document.getElementById("twist-debug-blocks"),e=document.getElementById("twist-debug-details"),i=!0,o=!1,r=void 0;try{for(var a,s=document.getElementById("twist-debug-details").querySelectorAll('.twist-debug-box, [class^="twist-debug-box-"], [class*=" twist-debug-box-"]')[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;l.querySelector(".twist-debug-more-details")&&!l.querySelector(".twist-debug-more-details-button")&&function(){var t=l.querySelector(".twist-debug-more-details"),e=document.createElement("a");e.classList.add("twist-debug-more-details-button"),e.innerHTML="&ctdot;",e.setAttribute("href","#twist-debug-more-details"),e.addEventListener("click",function(e){e.preventDefault(),t.offsetWidth>0&&t.offsetHeight>0?t.style.display="none":t.style.display="block"}),l.appendChild(e)}()}}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}var d=!0,u=!1,c=void 0;try{for(var f,y=t.querySelectorAll("button")[Symbol.iterator]();!(d=(f=y.next()).done);d=!0){f.value.addEventListener("click",function(n){n.preventDefault();if(this.classList.contains("current"))e.classList.remove("show"),this.classList.remove("current");else{var i=this.getAttribute("data-panel");e.classList.add("show");var o=!0,r=!1,a=void 0;try{for(var s,l=e.children[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var d=s.value;"div"===d.tagName.toLowerCase()&&(d.style.display="none")}}catch(t){r=!0,a=t}finally{try{!o&&l.return&&l.return()}finally{if(r)throw a}}e.querySelector(i).style.display="block";var u=!0,c=!1,f=void 0;try{for(var y,v=t.querySelectorAll("button.current")[Symbol.iterator]();!(u=(y=v.next()).done);u=!0){y.value.classList.remove("current")}}catch(t){c=!0,f=t}finally{try{!u&&v.return&&v.return()}finally{if(c)throw f}}this.classList.add("current")}})}}catch(t){u=!0,c=t}finally{try{!d&&y.return&&y.return()}finally{if(u)throw c}}document.getElementById("close-twist-debug-details").addEventListener("click",function(n){n.preventDefault(),t.querySelector("button.current").classList.remove("current"),e.classList.remove("show")}),n.wrap("#twist-debug-details table","div","table-wrapper"),document.getElementById("twist-debug").classList.add("ready")}}],[{key:"wrap",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";document.querySelectorAll(t).forEach(function(t){var i=document.createElement(e);n&&(i.className=n),t.parentElement.insertBefore(i,t),i.appendChild(t)})}}]),n}();window.twist?window.twist.debug=new n:window.twist={debug:new n};var i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href","https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"),document.getElementsByTagName("head")[0].appendChild(i)});
//# sourceMappingURL=twistdebug.js.map
